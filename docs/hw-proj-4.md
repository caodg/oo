
### 题目 4 麻将游戏
**1. 项目背景和目标**:

随着移动网络的不断发展，各类移动端应用不断涌出，涵盖了人们的生活，出行，社交，医疗等方方面面。但是除了应用类的移动软件，作为移动端应用的另外一大版块——游戏版块，也是当今移动网络的一个重要组成部分。

麻将起源于中国，原属皇家和王公贵胄的游戏，其历史可追溯到三四千年以前。在长期的历史演变过程中，麻将逐步从宫廷流传到民间，到清朝中叶基本定型。直到今天仍然是很多人们娱乐活动的一个重要部分，在线的麻将平台也有广泛的需求。

在这种背景下，本系统的目的在于建立一个完善的麻将游戏平台，满足玩家的需要。

**2. 功能概述**:

1. 玩家能进行注册和登录。
2. 玩家能够选择进行单机/联网游戏。
3. 对于单局游戏，应该满足提出的所有游戏应有的功能要求，比如出牌，摸牌，吃，碰，胡等。

**3. 术语约定**
	庄家：每局开始首先发牌的人。
	上家：在你的回合之前操作的人是你的上家。
	下家：在你的回合之后操作的人是你的下家。
	吃牌：当你的上家打了牌，且这张牌可以与你手上的牌构成连续的三个数时，这时可以吃牌，即将这三张牌单独拿出来亮出。吃牌后轮到你出牌。
	碰牌：当其他玩家打了牌，且你手上有两张这样的牌时，这时可以碰牌，即将这三张牌单独拿出来亮出。碰牌后轮到你出牌。
	杠牌/明杠：当其他玩家打了牌，且你手上有三张这样的牌时，这时可以杠牌，即将这三张牌单独拿出来亮出。并摸一张牌。杠牌后轮到你出牌。或者你又有一张已经碰过的牌，也可以杠牌。
	杠牌/暗杠：在你的回合，你手上有四张一样的牌时，你可以将这四张牌盖上亮出，并摸一张牌。杠牌后轮到你出牌。
	胡牌：当自己的回合摸牌，或者其他玩家打了牌，这张牌与你手上的牌组合满足胡牌条件，即可以选择胡牌获胜。
	宝牌：每局存在一张牌作为宝牌，宝牌可以替代其他任意一张牌。
	牌头：当前发牌的位置。
	牌尾：可发牌的最后一张的位置。
**4. 游戏规则**
	由于麻将的游戏规则种类繁多且差异巨大，这里并不要求实现很多奇奇怪怪的游戏规则，而只实现基本的麻将游戏规则。
4.1 发牌顺序规则
	游戏可以循环进行，一局结算后自动进入下一局，第一局随机一个人作为庄，从庄开始按逆时针顺序发牌，之后每局的胜者作为下一局的庄。
4.2 发牌规则
	游戏开始时，从随机位置开始发牌，从庄开始，逆时针一人发四张牌，这之后，庄拿之后的第一张和第五张牌，其余人依次拿第2,3,4张牌，发牌完后，庄有14张牌，其余人各13张。开局发牌后轮到庄出牌。
	之后按顺时针轮转，对应的玩家开局先摸一张牌，再进行出牌。
	对于杠牌，一律从牌尾得到杠牌。
4.3 翻宝牌
	发牌完后，从牌尾的随机1-6张的位置选择一张翻开正面亮出，这一张的下一张牌作为当局的宝牌。
4.4 胡牌规则
a)	当手上有七对牌时可以胡牌，牌型“七对”，如果有两对牌是一样的，牌型“豪华七对”。
b)	当手上加上牌/吃/杠满足33332的牌型时，可以胡牌，其中2代表一对牌，3代表杠，或者三张一样的牌，或者三张连续的牌。
c)	其中对于b)，如果所有牌花色一样，牌型“清一色”，如果所有的3都是三张一样的牌，牌型“碰碰胡”，如果胡牌过程中没有使用其他人打过的牌，牌型“门前清”。
d)	如果胡牌的时候有宝牌，称为“白胡”，否则如果没有宝牌或者宝牌没有当做其他牌，称为“黑胡”。
e)	具体算番方式暂略。
4.5 宝牌限制规则
a)	当手牌有两张或者两张以上的宝牌时，禁止吃/碰/杠操作。
b)	宝牌禁止打出。

